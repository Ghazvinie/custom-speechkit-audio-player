import { Meta } from '@storybook/addon-docs/blocks'

<Meta title="SpeechKit JS/Analytics" />

# Analytics system integrations
Various analytics system integrations.

---

The **SpeechKit Player** tracks engagement data, which is made available via the dashboard and can also make engagement data available via [Google Analytics](https://docs.speechkit.io/enhanced-features/google-analytics).
However, there are many more potential analytics services that can be used with our API. Provided that your analytics service is capable of retrieving this data via JavaScript, all API events can hypothetically be tracked and measured.

## **Listening for events**

**SpeechKit Player's** API is capable of listening for specific changes, either initiated by a user or by API, and then returning information about its use. A very basic example of detecting when a user initiates a play would be:

```js
window.addEventListener('message', event => {
  if (event.data && event.data.type === SpeechKit.postMessageTypes.play) {
    console.log('event -> data -> ', event.data)
  }
}, false)

/*
  SpeechKit.postMessageTypes = {
    load: 'sk-load',
    play: 'sk-play',
    pause: 'sk-pause',
    progress: 'sk-progress',
    setCurrentTime: 'sk-set-current-time',
    speed: 'sk-speed',
    listenToEnd: 'sk-listen-to-end',
    adLinkClick: 'sk-ad-link-click',
  }
*/

```
**SpeechKit Player's** use of [window.postMessage()](https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage) to send events

## **Message types**

**sk-play**

This event fires when playback is initiated.

**Event data**

| Property | Description | Unit | Type |
| :-- | :-- | :-- | :-- |
| type | The type of message | One of SpeechKit.postMessageTypes | String |
| isAdsPlaying | The indicator of the type of content being played | true or false | Boolean |
| duration | The total length of the audio article | Seconds | Number |
| currentTime | The length of the audio already played | Seconds | Number |

**Sample event data**

```json
{
  "type": "sk-play",
  "isAdsPlaying": false,
  "duration": 30.04,
  "currentTime": 10.6
}
```

**sk-pause**

This event fires when the audio is paused.

**Event data**

| Property | Description | Unit | Type |
| :-- | :-- | :-- | :-- |
| type | The type of message | One of SpeechKit.postMessageTypes | String |
| isAdsPlaying | The indicator of the type of content being played | true or false | Boolean |
| duration | The total length of the audio article | Seconds | Number |
| currentTime | The length of the audio already played | Seconds | Number |

**Sample event data**

```json
{
  "type": "sk-pause",
  "isAdsPlaying": false,
  "duration": 30.04,
  "currentTime": 10.6
}
```

**sk-progress**

The event data indicates the amount of the audio that has been played, this event is triggered every 20 percent of the listened sound.

**Event data**

| Property | Description | Unit | Type |
| :-- | :-- | :-- | :-- |
| type | The type of message | One of SpeechKit.postMessageTypes | String |
| isAdsPlaying | The indicator of the type of content being played | true or false | Boolean |
| duration | The total length of the audio article | Seconds | Number |
| currentTime | The length of the audio already played | Seconds | Number |

**Sample event data**

```json
{
  "type": "sk-progress",
  "isAdsPlaying": false,
  "duration": 30.04,
  "currentTime": 10.6
}
```

**sk-set-current-time**

This event fires when user changes current time.

**Event data**

| Property | Description | Unit | Type |
| :-- | :-- | :-- | :-- |
| type | The type of message | One of SpeechKit.postMessageTypes | String |
| isAdsPlaying | The indicator of the type of content being played | true or false | Boolean |
| duration | The total length of the audio article | Seconds | Number |
| currentTime | The length of the audio already played | Seconds | Number |

**Sample event data**

```json
{
  "type": "sk-set-current-time",
  "isAdsPlaying": false,
  "duration": 30.04,
  "currentTime": 10.6
}
```

**sk-speed**

This event fires when the playback rate of the audio in the player changes.

**Event data**

| Property | Description | Unit | Type |
| :-- | :-- | :-- | :-- |
| type | The type of message | One of SpeechKit.postMessageTypes | String |
| isAdsPlaying | The indicator of the type of content being played | true or false | Boolean |
| speed | The new playback rate | Speed (multiplier) | Number |

**Sample event data**

```json
{
  "type": "sk-speed",
  "isAdsPlaying": false,
  "speed": 1
}
```

**sk-listen-to-end**

This event fires when the audio is ended.

**Event data**

| Property | Description | Unit | Type |
| :-- | :-- | :-- | :-- |
| type | The type of message | One of SpeechKit.postMessageTypes | String |
| isAdsPlaying | The indicator of the type of content being played | true or false | Boolean |

**Sample event data**

```json
{
  "type": "sk-listen-to-end",
  "isAdsPlaying": false
}
```

**sk-ad-link-click**

This event fires when the user clicked on the Ad link.

**Event data**

| Property | Description | Unit | Type |
| :-- | :-- | :-- | :-- |
| type | The type of message | One of SpeechKit.postMessageTypes | String |
| isAdsPlaying | The indicator of the type of content being played | true or false | Boolean |

**Sample event data**

```json
{
  "type": "sk-ad-link-click",
  "isAdsPlaying": false
}
```

**sk-load**

This event fires when the audio is load.

**Event data**

| Property | Description | Unit | Type |
| :-- | :-- | :-- | :-- |
| type | The type of message | One of SpeechKit.postMessageTypes | String |
| isAdsPlaying | The indicator of the type of content being played | true or false | Boolean |

**Sample event data**

```json
{
  "type": "sk-load",
  "isAdsPlaying": false
}
```
