<!DOCTYPE html>
<html lang='en'>
<head>
  <meta charset='utf-8'>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link rel='stylesheet' href='/global.css'>
  <title>SpeechKit player</title>
  <style>
      body {
          background-color: #ffffff;
          transition: background-color .2s;
      }

      .isDarkTheme {
          background-color: #0d1117;
      }

      .isDarkTheme label {
          color: #FFFFFF;
      }

      main {
          margin: 0 auto;
          height: auto;
      }

      label {
          display: inline-block;
          margin-left: 15px;
          width: 150px;
      }
  </style>
</head>
<body class='isDarkTheme'>
<main>
  <div id='speechkit-player'></div>
  <div>
    <div>
      <label for='dm'>Dark mode</label>
      <input id='dm' type='checkbox' checked>
    </div>
    <div style='margin-top: 15px;'>
      <label for='color'>Change Colour</label>
      <input id='color' type='color' value='#be1212'>
      <label for='bgColor'>Change BgColour</label>
      <input id='bgColor' type='color' value='transparent'>
    </div>
    <div style='margin-top: 15px;'>
      <label for='dmColor'>Change dmColour</label>
      <input id='dmColor' type='color' value='#ffffff'>
      <label for='dmBgColor'>Change dmBgColour</label>
      <input id='dmBgColor' type='color' value='transparent'>
    </div>
  </div>
  <div>
    <a href='/darkmode'>back</a>
  </div>
</main>
<script defer type='module'>
  import init from '/darkmode/main.js'
  import SpeechKit from '/build/module/index.js'

  const playerCfg = {
    renderNode: 'speechkit-player',
    projectId: 2800,
    podcastId: 281813,
    isDemo: true,
    isPodcastPlayer: true,
    publisher: 'Podcast Player',
    publisherLogo: 'https://static.toiimg.com/photo/msid-67586673/67586673.jpg',
    featureFlags: 'ui_v2, podcast_like, podcast_like_sanofi',
    publisherDm: true,
    publisherColor: '#be1212',
    publisherBgColor: 'transparent',
    publisherDmColor: '#ffffff',
    publisherDmBgColor: 'transparent',
  };

  Promise.all([
    SpeechKit.sdk.player(playerCfg),
  ]).then(apps => {
    const bodyRef = document.querySelector('body')
    init(payload => {
      if ('dm' in payload) {
        bodyRef.classList[payload.dm ? 'add' : 'remove']('isDarkTheme')
      }

      apps.forEach(app => {
        app.changeColor(payload)
      })
    })
  })
</script>
</body>
</html>
